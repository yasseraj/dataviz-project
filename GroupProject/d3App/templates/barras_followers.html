{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Data visualization</title>
    <!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 10]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="Gradient Able Bootstrap admin template made using Bootstrap 4 and it has huge amount of ready made feature, UI components, pages which completely fulfills any dashboard needs." />
    <meta name="keywords" content="flat ui, admin Admin , Responsive, Landing, Bootstrap, App, Template, Mobile, iOS, Android, apple, creative app">
    <meta name="author" content="Phoenixcoded" />
    <!-- Favicon icon -->
    <link rel="icon" href="{% static 'files/assets/images/favicon.ico' %}" type="image/x-icon">
    <!-- Google font-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
    <!-- Required Fremwork -->
    <link rel="stylesheet" type="text/css" href="{% static 'files/bower_components/bootstrap/css/bootstrap.min.css' %}">
    <!-- waves.css -->
    <link rel="stylesheet" href="{% static 'files/assets/pages/waves/css/waves.min.css' %}" type="text/css" media="all">
    <!-- feather icon -->
    <link rel="stylesheet" type="text/css" href="{% static 'files/assets/icon/feather/css/feather.css' %}">
    <!-- Style.css -->
    <link rel="stylesheet" type="text/css" href="{% static 'files/assets/css/style.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'files/assets/css/widget.css' %}">
    <style>
        .main-menu .main-menu-header img {
            position: relative;
            width: 200px;
            margin: 0 auto 15px;
            display: block;
            border-radius: 0;
        }
        .axis {
            font: 10px sans-serif;
        }
        .axis path,
        .axis line {
            fill: none;
            stroke: #000;
            shape-rendering: crispEdges;
        }
    </style>
    <script src="{% static 'js/d3.layout.cloud.js' %}"></script>
</head>

<body>
    <!-- [ Pre-loader ] start -->
    <div class="loader-bg">
        <div class="loader-bar"></div>
    </div>
    <!-- [ Pre-loader ] end -->
    <div id="pcoded" class="pcoded">
        <div class="pcoded-overlay-box"></div>
        <div class="pcoded-container navbar-wrapper">

            <div class="pcoded-main-container">
                <div class="pcoded-wrapper">
                    <!-- [ navigation menu ] start -->
                     <nav class="pcoded-navbar">
                    <div class="pcoded-inner-navbar main-menu">
                        <div class="">
                            <div class="main-menu-header">
                                <img class="img-menu-user img-radius" src="{% static 'files/assets/images/logo.png' %}" alt="User-Profile-Image">
                            </div>
                        </div>
                        <ul class="pcoded-item pcoded-left-item">
                            <li class="pcoded-hasmenu">
                                <a href="javascript:void(0)" class="waves-effect waves-dark">
                                    <span class="pcoded-micon"><i class="feather icon-home"></i></span>
                                    <span class="pcoded-mtext">Dashboard</span>
                                </a>
                                <ul class="pcoded-submenu">
                                    <li class="">
                                        <a href="{% url 'home' %}" class="waves-effect waves-dark">
                                            <span class="pcoded-mtext">Datasets</span>
                                        </a>
                                    </li>
                                    <li class="active">
                                        <a href="{% url 'following_er' %}" class="waves-effect waves-dark">
                                            <span class="pcoded-mtext">Barras</span>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a href="{% url 'lineas' %}" class="waves-effect waves-dark">
                                            <span class="pcoded-mtext">Líneas</span>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a href="{% url 'pagina_nube_palabras' %}" class="waves-effect waves-dark">
                                            <span class="pcoded-mtext">Nube de palabras</span>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a href="{% url 'burbuja' %}" class="waves-effect waves-dark">
                                            <span class="pcoded-mtext">Burbujas</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </nav>
                    <!-- [ navigation menu ] end -->
                    <div class="pcoded-content">
                        <!-- [ breadcrumb ] start -->
                        <div class="page-header">
                            <div class="page-block">
                                <div class="row align-items-center">
                                    <div class="col-md-8">
                                        <div class="page-header-title">
                                            <h4 class="m-b-10">Dashboard</h4>
                                        </div>
                                        <ul class="breadcrumb">
                                            <li class="breadcrumb-item">
                                                <a href="{% url 'home' %}">
                                                    <i class="feather icon-home"></i>
                                                </a>
                                            </li>
                                            <li class="breadcrumb-item">
                                                <a href="#!">Gráfica de barras</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- [ breadcrumb ] end -->
                        <div class="pcoded-inner-content">
                            <div class="main-body">
                                <div class="page-wrapper">
                                    <div class="page-body">
                                        <!-- [ page content ] start -->
                                        <div class="row">

                                            <!-- site Analytics card start -->
                                            <div class="col-lg-12 col-md-12">
                                                <div class="card">
                                                    <div class="card-header borderless">
                                                        <h5>Diagrama de barras de los usuarios con más followers</h5>
                                                        <span class="text-muted"></span>
                                                        <div class="card-header-right">
                                                            <ul class="list-unstyled card-option">
                                                                <li class="first-opt"><i class="feather icon-chevron-left open-card-option"></i></li>
                                                                <li><i class="feather icon-maximize full-card"></i></li>
                                                                <li><i class="feather icon-minus minimize-card"></i></li>
                                                                <li><i class="feather icon-chevron-left open-card-option"></i></li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div id="grafica" class="card-block">

                                                    </div>
                                                </div>
                                                <div class="card">
                                                    <div class="card-header borderless">
                                                        <h5>Diagrama de barras de los usuarios con más followings</h5>
                                                        <span class="text-muted"></span>
                                                        <div class="card-header-right">
                                                            <ul class="list-unstyled card-option">
                                                                <li class="first-opt"><i class="feather icon-chevron-left open-card-option"></i></li>
                                                                <li><i class="feather icon-maximize full-card"></i></li>
                                                                <li><i class="feather icon-minus minimize-card"></i></li>
                                                                <li><i class="feather icon-chevron-left open-card-option"></i></li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div id="grafica1" class="card-block">

                                                    </div>
                                                </div>
                                                <div class="card">
                                                    <div class="card-header borderless">
                                                        <h5>Diagrama de barras de los usuarios según ratio Followers/Following</h5>
                                                        <span class="text-muted"></span>
                                                        <div class="card-header-right">
                                                            <ul class="list-unstyled card-option">
                                                                <li class="first-opt"><i class="feather icon-chevron-left open-card-option"></i></li>
                                                                <li><i class="feather icon-maximize full-card"></i></li>
                                                                <li><i class="feather icon-minus minimize-card"></i></li>
                                                                <li><i class="feather icon-chevron-left open-card-option"></i></li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div id="grafica2" class="card-block">

                                                    </div>
                                                </div>
                                            </div>
                                            <!-- site Analytics card end -->

                                        </div>
                                        <!-- [ page content ] end -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="{% static 'files/bower_components/jquery/js/jquery.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'files/bower_components/jquery-ui/js/jquery-ui.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'files/bower_components/popper.js/js/popper.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'files/bower_components/bootstrap/js/bootstrap.min.js' %}"></script>
    <!-- waves js -->
    <script src="{% static 'files/assets/pages/waves/js/waves.min.js' %}"></script>
    <!-- jquery slimscroll js -->
    <script type="text/javascript" src="{% static 'files/bower_components/jquery-slimscroll/js/jquery.slimscroll.js' %}"></script>
    <!-- Float Chart js -->
    <script src="{% static 'files/assets/pages/chart/float/jquery.flot.js' %}"></script>
    <script src="{% static 'files/assets/pages/chart/float/jquery.flot.categories.js' %}"></script>
    <script src="{% static 'files/assets/pages/chart/float/curvedLines.js' %}"></script>
    <script src="{% static 'files/assets/pages/chart/float/jquery.flot.tooltip.min.js' %}"></script>
    <!-- amchart js -->
    <script src="{% static 'files/assets/pages/widget/amchart/amcharts.js' %}"></script>
    <script src="{% static 'files/assets/pages/widget/amchart/serial.js' %}"></script>
    <script src="{% static 'files/assets/pages/widget/amchart/light.js' %}"></script>
    <!-- Custom js -->
    <script src="{% static 'files/assets/js/pcoded.min.js' %}"></script>
    <script src="{% static 'files/assets/js/vertical/vertical-layout.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'files/assets/pages/dashboard/custom-dashboard.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'files/assets/js/script.min.js' %}"></script>
    <script>
        var margin = {top: 10, right: 10, bottom: 70, left: 100},
            width = 900 - margin.left - margin.right,
            height = 400 - margin.top - margin.bottom;

        var x = d3.scale.ordinal().rangeRoundBands([0, width], .05);
        var y = d3.scale.linear().range([height, 0]);

        var xAxis = d3.svg.axis().scale(x).orient("bottom").ticks(24);
        var yAxis = d3.svg.axis().scale(y).orient("left").ticks(10);

        var svg = d3.select("#grafica").append("svg").attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g").attr("transform","translate(" + margin.left + "," + margin.top + ")");

        d3.json("{% url "following_er_data" %}", function(error, data) {
            data = data.slice(0,15);

            x.domain(data.map(function(d) { return d.nickname; }));
            y.domain([0, d3.max(data, function(d) { return d.followers; })]);

            svg.append("g").attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis).selectAll("text")
                .style("text-anchor", "end")
                .attr("dx", "-.8em").attr("dy", "-.55em")
                .attr("transform", "rotate(-30)" );

            svg.append("g")
                .attr("class", "y axis")
                .call(yAxis).append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 6).attr("dy", ".71em")
                .style("text-anchor", "end");

            svg.selectAll("bar")
                .data(data).enter().append("rect")
                .style("fill", "steelblue")
                .attr("x", function(d) { return x(d.nickname); })
                .attr("width", x.rangeBand())
                .attr("y", function(d) { return y(d.followers); })
                .attr("height", function(d) { return height - y(d.followers); });
        });
    </script>
    <script>
        var x1 = d3.scale.ordinal().rangeRoundBands([0, width], .05);
        var y1 = d3.scale.linear().range([height, 0]);

        var xAxis1 = d3.svg.axis().scale(x1).orient("bottom").ticks(24);
        var yAxis1 = d3.svg.axis().scale(y1).orient("left").ticks(10);

        var svg1 = d3.select("#grafica1").append("svg").attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g").attr("transform","translate(" + margin.left + "," + margin.top + ")");

        d3.json("{% url "following_er_data1" %}", function(error, data) {
            data = data.slice(0,15);

            x1.domain(data.map(function(d) { return d.nickname; }));
            y1.domain([0, d3.max(data, function(d) { return d.following; })]);

            svg1.append("g").attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis1).selectAll("text")
                .style("text-anchor", "end")
                .attr("dx", "-.8em").attr("dy", "-.55em")
                .attr("transform", "rotate(-30)" );

            svg1.append("g")
                .attr("class", "y axis")
                .call(yAxis1).append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 6).attr("dy", ".71em")
                .style("text-anchor", "end");

            svg1.selectAll("bar")
                .data(data).enter().append("rect")
                .style("fill", "steelblue")
                .attr("x", function(d) { return x1(d.nickname); })
                .attr("width", x1.rangeBand())
                .attr("y", function(d) { return y1(d.following); })
                .attr("height", function(d) { return height - y1(d.following); });
        });
    </script>
    <script>
        var x2 = d3.scale.ordinal().rangeRoundBands([0, width], .05);
        var y2 = d3.scale.linear().range([height, 0]);

        var xAxis2 = d3.svg.axis().scale(x2).orient("bottom").ticks(24);
        var yAxis2 = d3.svg.axis().scale(y2).orient("left").ticks(10);

        var svg2 = d3.select("#grafica2").append("svg").attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g").attr("transform","translate(" + margin.left + "," + margin.top + ")");

        d3.json("{% url "following_er_data2" %}", function(error, data) {
            data = data.slice(0,15);

            x2.domain(data.map(function(d) { return d.nickname; }));
            y2.domain([0, d3.max(data, function(d) { return d.ratio; })]);

            svg2.append("g").attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis2).selectAll("text")
                .style("text-anchor", "end")
                .attr("dx", "-.8em").attr("dy", "-.55em")
                .attr("transform", "rotate(-30)" );

            svg2.append("g")
                .attr("class", "y axis")
                .call(yAxis2).append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 6).attr("dy", ".71em")
                .style("text-anchor", "end");

            svg2.selectAll("bar")
                .data(data).enter().append("rect")
                .style("fill", "steelblue")
                .attr("x", function(d) { return x2(d.nickname); })
                .attr("width", x2.rangeBand())
                .attr("y", function(d) { return y2(d.ratio); })
                .attr("height", function(d) { return height - y2(d.ratio); });
        });
    </script>
</body>

</html>
